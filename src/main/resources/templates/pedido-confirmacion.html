<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es" th:replace="~{base :: Layout(~{::content})}">
<div th:fragment="content">
    <main class="container mt-5">
        <h2 class="mb-4 text-success">¡Pedido confirmado!</h2>

        <p>Gracias por tu compra, <span th:text="${pedido.usuario.nombre}">Usuario</span>.</p>
        <p>Tu pedido está en estado: <strong th:text="${pedido.estado}">pendiente</strong>.</p>

        <h5>Resumen del pedido:</h5>
        <ul class="list-group mb-4">
            <li class="list-group-item d-flex justify-content-between" th:each="item : ${pedido.detalles}">
                <span th:text="${item.producto.nombre} + ' x ' + ${item.cantidad}"></span>
                <span th:text="'₡' + ${#numbers.formatDecimal(item.subtotal, 2, 'POINT')}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between fw-bold">
                <span>Costo envío</span>
                <span th:text="'₡' + ${#numbers.formatDecimal(pedido.costoEnvio, 2, 'POINT')}"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between fw-bold">
                <span>Total</span>
                <span th:text="'₡' + ${#numbers.formatDecimal(pedido.total, 2, 'POINT')}"></span>
            </li>
        </ul>

        <h5>Detalles de pago y entrega:</h5>
        <p><strong>Método de pago:</strong> <span th:text="${pedido.metodoPago.nombre}">Tarjeta</span></p>
        <p><strong>Método de entrega:</strong> <span th:text="${pedido.metodoEntrega}">Domicilio</span></p>
        <p th:if="${pedido.fechaEntregaProgramada != null}">
            <strong>Fecha de entrega programada:</strong> 
            <span th:text="${#dates.format(pedido.fechaEntregaProgramada, 'dd/MM/yyyy HH:mm')}"></span>
        </p>

        <a th:href="@{/catalogo}" class="btn btn-primary">Seguir comprando</a>
    </main>
</div>
</html>