<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es"
      th:replace="~{base :: Layout(~{::content})}">
<div th:fragment="content">

    <main class="container mt-5">

        <h2 class="mb-4 text-center">Método de Pago</h2>

        <!-- Resumen del carrito -->
        <div class="mb-4">
            <h5>Resumen:</h5>

            <ul class="list-group">

                <!-- ITEMS -->
                <li class="list-group-item d-flex justify-content-between"
                    th:each="item : ${carrito.items}">
                    <span th:text="${item.producto.nombre + ' x ' + item.cantidad}"></span>
                    <span th:text="'₡' + item.subtotal"></span>
                </li>

                <!-- COSTO ENVÍO -->
                <li class="list-group-item d-flex justify-content-between fw-bold">
                    <span>Costo de envío</span>
                    <span th:text="'₡' + carrito.costoEnvio"></span>
                </li>

                <!-- TOTAL -->
                <li class="list-group-item d-flex justify-content-between fw-bold">
                    <span>Total</span>
                    <span th:text="'₡' + carrito.total"></span>
                </li>

            </ul>
        </div>

        <!-- FORMULARIO MÉTODO DE PAGO -->
        <form th:action="@{/checkout/pago}" method="post">

            <div class="mb-3">
                <label class="form-label fw-bold">Selecciona método de pago:</label>
                <select name="idMetodoPago" class="form-select" required>
                    <option value="">Seleccionar...</option>

                    <option th:each="mp : ${metodos}"
                            th:value="${mp.id}"
                            th:text="${mp.nombre}">
                    </option>
                </select>
            </div>

            <p class="text-muted fst-italic">
                * Los pagos con SINPE Móvil, transferencia y Zelle requieren enviar el comprobante
                vía WhatsApp.
            </p>

            <button type="submit" class="btn btn-success w-100">
                Confirmar pedido y enviar comprobante
            </button>
        </form>

    </main>

</div>
</html>